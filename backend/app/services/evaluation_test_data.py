"""
Evaluation Test Data - 7 Complete Test Cases with Correct Ground Truth Values
Based on Thai Tax Law (guideline50_50.pdf) and Marginal Tax Rate Calculation

Last Updated: 2025-10-27
Status: READY FOR EVALUATION ✅
"""

from typing import List, Dict, Any


class EvaluationTestData:
    """
    Test data for AI Tax Advisor evaluation
    7 comprehensive test cases covering various income levels, professions, and risk tolerances
    All tax saving values calculated using correct marginal tax rate formula
    """

    # ===================================================================
    # TEST CASE 1: รายได้ 600K - ความเสี่ยงกลาง
    # ===================================================================
    TEST_CASE_1 = {
        "name": "รายได้ 600K - ความเสี่ยงกลาง",
        "description": "พนักงานรายได้ปานกลาง มี PVD ความเสี่ยงกลาง",
        "input": {
            "gross_income": 600000,
            "income_type": "40(1)",
            "profession_type": None,
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 0,
            "child_deduction": 0,
            "parent_support": 0,
            "disabled_support": 0,
            "life_insurance": 50000,
            "life_insurance_pension": 0,
            "life_insurance_parents": 0,
            "health_insurance": 15000,
            "health_insurance_parents": 0,
            "social_security": 9000,
            "pension_insurance": 0,
            "provident_fund": 50000,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "medium"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 60000,
                "total_tax_saving": 6000,  # 316K + 60K = 376K (10% bracket) → 60K × 10% = 6,000
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับรายได้ระดับกลาง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ความคุ้มครอง", "ประกัน", "เงินลงทุน", "รายได้"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 100000,
                "total_tax_saving": 10000,  # 316K + 100K = 416K (10% bracket) → 100K × 10% = 10,000
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นการลงทุนแบบสมดุลระหว่างประกันและกองทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["สมดุล", "กระจายความเสี่ยง", "กองทุน", "ประกัน"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 150000,
                "total_tax_saving": 15000,  # 316K + 150K = 466K (10% bracket) → 150K × 10% = 15,000
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีสูงสุด ใช้วงเงินลงทุนเต็มที่สำหรับผลประโยชน์ทางภาษีสูงสุด",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อน", "ภาษี", "วงเงิน", "ผลประโยชน์"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 2: รายได้ 1.5M - ความเสี่ยงสูง
    # ===================================================================
    TEST_CASE_2 = {
        "name": "รายได้ 1.5M - ความเสี่ยงสูง",
        "description": "ผู้บริหารรายได้สูง ยอมรับความเสี่ยงสูง",
        "input": {
            "gross_income": 1500000,
            "income_type": "40(1)",
            "profession_type": None,
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 60000,
            "parent_support": 60000,
            "disabled_support": 0,
            "life_insurance": 100000,
            "life_insurance_pension": 10000,
            "life_insurance_parents": 0,
            "health_insurance": 25000,
            "health_insurance_parents": 0,
            "social_security": 9000,
            "pension_insurance": 0,
            "provident_fund": 75000,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "high"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 300000,
                "total_tax_saving": 75000,  # 941K + 300K = 1,241K (25% bracket) → 300K × 25% = 75,000
                "expected_text": {
                    "description": "เน้นการลงทุน เพิ่มผลตอบแทนแบบรับความเสี่ยง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ผลตอบแทน", "ลงทุน", "ความเสี่ยง", "กองทุน"],
                    "key_points": [
                        "กองทุน",
                        "ผลตอบแทน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 500000,
                "total_tax_saving": 125000,  # 941K + 500K = 1,441K (25% bracket) → 500K × 25% = 125,000
                "expected_text": {
                    "description": "เน้นการลงทุนแบบก้าวร้าว กระจายในกองทุนหุ้นและตราสารทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["หุ้น", "RMF", "ผลตอบแทน", "เสี่ยง"],
                    "key_points": [
                        "กองทุน",
                        "ผลตอบแทน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 800000,
                "total_tax_saving": 200000,  # 941K + 800K = 1,741K (25% bracket) → 800K × 25% = 200,000
                "expected_text": {
                    "description": "เน้นผลตอบแทนและลดหย่อนภาษีสูงสุด ลงทุนในตราสารทุนเต็มที่",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อน", "หุ้น", "วงเงิน", "สูงสุด"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 3: รายได้ 360K - ความเสี่ยงต่ำ
    # ===================================================================
    TEST_CASE_3 = {
        "name": "รายได้ 360K - ความเสี่ยงต่ำ",
        "description": "พนักงานรายได้น้อย เน้นความปลอดภัย",
        "input": {
            "gross_income": 360000,
            "income_type": "40(1)",
            "profession_type": None,
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 0,
            "child_deduction": 30000,
            "parent_support": 0,
            "disabled_support": 0,
            "life_insurance": 20000,
            "life_insurance_pension": 0,
            "life_insurance_parents": 0,
            "health_insurance": 10000,
            "health_insurance_parents": 0,
            "social_security": 9000,
            "pension_insurance": 0,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "low"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 40000,
                "total_tax_saving": 2000,  # 131K + 40K = 171K (5% bracket) → 40K × 5% = 2,000
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับผู้ที่ต้องการความปลอดภัย",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ประกัน", "คุ้มครอง", "ความเสี่ยงต่ำ"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 60000,
                "total_tax_saving": 3000,  # 131K + 60K = 191K (5% bracket) → 60K × 5% = 3,000
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นประกันและการออมแบบปลอดภัย",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["สมดุล", "การออม", "ปลอดภัย"],
                    "key_points": [
                        "กองทุน",
                        "ผลตอบแทน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 80000,
                "total_tax_saving": 4000,  # 131K + 80K = 211K (5% bracket) → 80K × 5% = 4,000
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีแบบปลอดภัย เพิ่มความคุ้มครองครบถ้วน",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อน", "ภาษี", "วงเงิน"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 4: ข้าราชการ 900K - ความเสี่ยงกลาง
    # ===================================================================
    TEST_CASE_4 = {
        "name": "ข้าราชการ 900K - ความเสี่ยงกลาง",
        "description": "ข้าราชการมี GPF รายได้ดี มีครอบครัว",
        "input": {
            "gross_income": 900000,
            "income_type": "40(1)",
            "profession_type": None,
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 60000,
            "parent_support": 60000,
            "disabled_support": 0,
            "life_insurance": 50000,
            "life_insurance_pension": 10000,
            "life_insurance_parents": 0,
            "health_insurance": 15000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 0,
            "provident_fund": 0,
            "gpf": 90000,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "medium"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 60000,
                "total_tax_saving": 6000,  # 386K + 60K = 446K (10% bracket) → 60K × 10% = 6,000
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับรายได้ระดับกลาง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ประกัน", "คุ้มครอง", "ลดหย่อนภาษี"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 100000,
                "total_tax_saving": 10000,  # 386K + 100K = 486K (10% bracket) → 100K × 10% = 10,000
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นการลงทุนแบบสมดุลระหว่างประกันและกองทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["กองทุน", "RMF", "สมดุล"],
                    "key_points": [
                        "กองทุน",
                        "ผลตอบแทน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 150000,
                "total_tax_saving": 22500,  # 386K + 150K = 536K (15% bracket) → 150K × 15% = 22,500
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีสูงสุด ใช้วงเงินลงทุนเต็มที่สำหรับผลประโยชน์ทางภาษีสูงสุด",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อน", "RMF", "วงเงิน"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 5: ครูอาจารย์ 720K - ความเสี่ยงต่ำ
    # ===================================================================
    TEST_CASE_5 = {
        "name": "ครูอาจารย์ 720K - ความเสี่ยงต่ำ",
        "description": "ครูมี กบศ. (PVD Teacher) เน้นความปลอดภัย",
        "input": {
            "gross_income": 720000,
            "income_type": "40(1)",
            "profession_type": None,
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 60000,
            "parent_support": 120000,
            "disabled_support": 0,
            "life_insurance": 50000,
            "life_insurance_pension": 10000,
            "life_insurance_parents": 0,
            "health_insurance": 10000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 0,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 70000,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "low"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 60000,
                "total_tax_saving": 3000,  # 180K + 60K = 240K (5% bracket) → 60K × 5% = 3,000
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับผู้ที่ต้องการความปลอดภัย",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ประกัน", "คุ้มครอง", "ความเสี่ยงต่ำ"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 100000,
                "total_tax_saving": 5000,  # 180K + 100K = 280K (5% bracket) → 100K × 5% = 5,000
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นประกันและการออมแบบปลอดภัย",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["สมดุล", "การออม", "ปลอดภัย"],
                    "key_points": [
                        "กองทุน",
                        "ผลตอบแทน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 150000,
                "total_tax_saving": 15000,  # 180K + 150K = 330K (10% bracket) → 150K × 10% = 15,000
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีแบบปลอดภัย เพิ่มความคุ้มครองครบถ้วน",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อน", "ภาษี", "วงเงิน"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 6: ฟรีแลนซ์วิศวกร 1.2M - ความเสี่ยงสูง
    # ===================================================================
    TEST_CASE_6 = {
        "name": "ฟรีแลนซ์วิศวกร 1.2M - ความเสี่ยงสูง",
        "description": "วิศวกรฟรีแลนซ์ Section 40(6) หัก 30%",
        "input": {
            "gross_income": 1200000,
            "income_type": "40(6)",
            "profession_type": "engineering",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 30000,
            "parent_support": 30000,
            "disabled_support": 0,
            "life_insurance": 0,
            "life_insurance_pension": 0,
            "life_insurance_parents": 0,
            "health_insurance": 0,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 0,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "high"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 200000,
                "total_tax_saving": 40000,  # 660K + 200K = 860K (20% bracket) → 200K × 20% = 40,000
                "expected_text": {
                    "description": "เน้นการลงทุน เพิ่มผลตอบแทนแบบรับความเสี่ยง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["หุ้น", "SSF", "ผลตอบแทน"],
                    "key_points": [
                        "กองทุน",
                        "ผลตอบแทน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 350000,
                "total_tax_saving": 87500,  # 660K + 350K = 1,010K (25% bracket) → 350K × 25% = 87,500
                "expected_text": {
                    "description": "เน้นการลงทุนแบบก้าวร้าว กระจายในกองทุนหุ้นและตราสารทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["หุ้น", "RMF", "ผลตอบแทน"],
                    "key_points": [
                        "กองทุน",
                        "ผลตอบแทน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 500000,
                "total_tax_saving": 125000,  # 660K + 500K = 1,160K (25% bracket) → 500K × 25% = 125,000
                "expected_text": {
                    "description": "เน้นผลตอบแทนและลดหย่อนภาษีสูงสุด ลงทุนในตราสารทุนเต็มที่",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อน", "หุ้น", "วงเงิน"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 7: แพทย์ 3M - ความเสี่ยงสูง
    # ===================================================================
    TEST_CASE_7 = {
        "name": "แพทย์ 3M - ความเสี่ยงสูง",
        "description": "แพทย์ Section 40(6) Medical หัก 60%",
        "input": {
            "gross_income": 3000000,
            "income_type": "40(6)",
            "profession_type": "medical",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 60000,
            "parent_support": 120000,
            "disabled_support": 0,
            "life_insurance": 100000,
            "life_insurance_pension": 10000,
            "life_insurance_parents": 0,
            "health_insurance": 25000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 50000,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "high"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 800000,
                "total_tax_saving": 200000,  # 715K + 800K = 1,515K (25% bracket) → 800K × 25% = 200,000
                "expected_text": {
                    "description": "เน้นการลงทุน เพิ่มผลตอบแทนแบบรับความเสี่ยง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["หุ้น", "SSF", "ผลตอบแทน"],
                    "key_points": [
                        "กองทุน",
                        "ผลตอบแทน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 1200000,
                "total_tax_saving": 300000,  # 715K + 1,200K = 1,915K (25% bracket) → 1,200K × 25% = 300,000
                "expected_text": {
                    "description": "เน้นการลงทุนแบบก้าวร้าว กระจายในกองทุนหุ้นและตราสารทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["หุ้น", "RMF", "ผลตอบแทน"],
                    "key_points": [
                        "กองทุน",
                        "ผลตอบแทน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 1800000,
                "total_tax_saving": 540000,  # 715K + 1,800K = 2,515K (30% bracket) → 1,800K × 30% = 540,000
                "expected_text": {
                    "description": "เน้นผลตอบแทนและลดหย่อนภาษีสูงสุด ลงทุนในตราสารทุนเต็มที่",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อน", "หุ้น", "วงเงิน"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 8: ทนายความ 960K - ความเสี่ยงกลาง
    # Section 40(6) - Law profession (30% deduction)
    # ===================================================================
    TEST_CASE_8 = {
        "name": "ทนายความ 960K - ความเสี่ยงกลาง",
        "description": "ทนายความ Section 40(6) Law หัก 30%",
        "input": {
            "gross_income": 960000,
            "income_type": "40(6)",
            "profession_type": "law",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 30000,
            "parent_support": 60000,
            "disabled_support": 0,
            "life_insurance": 50000,
            "life_insurance_pension": 10000,
            "life_insurance_parents": 0,
            "health_insurance": 15000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 50000,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "medium"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 60000,
                "total_tax_saving": 6000,  # Taxable: 337K (10% bracket) → 60K × 10% = 6,000
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับรายได้ระดับกลาง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ความคุ้มครอง", "ประกัน", "ความเสี่ยงต่ำ", "เงินลงทุนพอเหมาะ"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 100000,
                "total_tax_saving": 10000,  # Taxable: 337K (10% bracket) → 100K × 10% = 10,000
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นการลงทุนแบบสมดุลระหว่างประกันและกองทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["สมดุล", "กระจายความเสี่ยง", "RMF", "ThaiESG", "ความเสี่ยงปานกลาง"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 150000,
                "total_tax_saving": 15000,  # Taxable: 337K (10% bracket) → 150K × 10% = 15,000
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีสูงสุด ใช้วงเงินลงทุนเต็มที่สำหรับผลประโยชน์ทางภาษีสูงสุด",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อนสูงสุด", "RMF", "ThaiESG", "วงเงินเต็มที่", "ผลประโยชน์ภาษี"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 9: สถาปนิก 1.8M - ความเสี่ยงสูง
    # Section 40(6) - Architecture profession (30% deduction)
    # ===================================================================
    TEST_CASE_9 = {
        "name": "สถาปนิก 1.8M - ความเสี่ยงสูง",
        "description": "สถาปนิก Section 40(6) Architecture หัก 30%",
        "input": {
            "gross_income": 1800000,
            "income_type": "40(6)",
            "profession_type": "architecture",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 60000,
            "parent_support": 120000,
            "disabled_support": 0,
            "life_insurance": 100000,
            "life_insurance_pension": 10000,
            "life_insurance_parents": 0,
            "health_insurance": 25000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 100000,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "high"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 300000,
                "total_tax_saving": 75000,  # Taxable: 725K (15% bracket, but AMT 0.5% applies) → 300K × 25% = 75,000
                "expected_text": {
                    "description": "เน้นการลงทุน เพิ่มผลตอบแทนแบบรับความเสี่ยง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ผลตอบแทนสูง", "หุ้น", "กองทุนรวม", "รับความเสี่ยง"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 500000,
                "total_tax_saving": 125000,  # Taxable: 725K (15% bracket, but AMT 0.5% applies) → 500K × 25% = 125,000
                "expected_text": {
                    "description": "เน้นการลงทุนแบบก้าวร้าว กระจายในกองทุนหุ้นและตราสารทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["ก้าวร้าว", "กองทุนหุ้น", "SSF", "RMF", "ความเสี่ยงสูง"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 800000,
                "total_tax_saving": 200000,  # Taxable: 725K (15% bracket, but AMT 0.5% applies) → 800K × 25% = 200,000
                "expected_text": {
                    "description": "เน้นผลตอบแทนและลดหย่อนภาษีสูงสุด ลงทุนในตราสารทุนเต็มที่",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ผลตอบแทนสูงสุด", "ลดหย่อนสูงสุด", "หุ้น", "SSF", "RMF"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 10: ร้านตัดผม 540K - ความเสี่ยงต่ำ
    # Section 40(8) - Hair salon business (60% deduction)
    # ===================================================================
    TEST_CASE_10 = {
        "name": "ร้านตัดผม 540K - ความเสี่ยงต่ำ",
        "description": "เจ้าของร้านตัดผม Section 40(8) หัก 60%",
        "input": {
            "gross_income": 540000,
            "income_type": "40(8)",
            "profession_type": None,
            "business_type": "hair_salon",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 60000,
            "parent_support": 0,
            "disabled_support": 0,
            "life_insurance": 30000,
            "life_insurance_pension": 0,
            "life_insurance_parents": 0,
            "health_insurance": 10000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 0,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "low"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 40000,
                "total_tax_saving": 0,  # Taxable: 0 (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับผู้ที่ต้องการความปลอดภัย",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ความคุ้มครอง", "ประกัน", "ความเสี่ยงต่ำ", "เงินลงทุนน้อย"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 60000,
                "total_tax_saving": 0,  # Taxable: 0 (0% bracket) → No tax saving
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นประกันและการออมแบบปลอดภัย",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["สมดุล", "ประกันบำนาญ", "ความปลอดภัย", "การออม"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 80000,
                "total_tax_saving": 0,  # Taxable: 0 (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีแบบปลอดภัย เพิ่มความคุ้มครองครบถ้วน",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อนภาษี", "ความคุ้มครอง", "ประกันครบถ้วน", "ความมั่นคง"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 11: ร้านขายของ 1M - ความเสี่ยงกลาง
    # Section 40(8) - General trade business (60% deduction)
    # ===================================================================
    TEST_CASE_11 = {
        "name": "ร้านขายของ 1M - ความเสี่ยงกลาง",
        "description": "ร้านค้าทั่วไป Section 40(8) หัก 60%",
        "input": {
            "gross_income": 1000000,
            "income_type": "40(8)",
            "profession_type": None,
            "business_type": "general_trade",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 60000,
            "parent_support": 60000,
            "disabled_support": 0,
            "life_insurance": 50000,
            "life_insurance_pension": 10000,
            "life_insurance_parents": 0,
            "health_insurance": 20000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 50000,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "medium"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 200000,
                "total_tax_saving": 0,  # Taxable: 65K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับรายได้ระดับกลาง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ความคุ้มครอง", "ประกัน", "ความเสี่ยงต่ำ", "เงินลงทุนพอเหมาะ"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 350000,
                "total_tax_saving": 0,  # Taxable: 65K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นการลงทุนแบบสมดุลระหว่างประกันและกองทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["สมดุล", "กระจายความเสี่ยง", "RMF", "ThaiESG", "ความเสี่ยงปานกลาง"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 500000,
                "total_tax_saving": 0,  # Taxable: 65K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีสูงสุด ใช้วงเงินลงทุนเต็มที่สำหรับผลประโยชน์ทางภาษีสูงสุด",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อนสูงสุด", "RMF", "ThaiESG", "วงเงินเต็มที่", "ผลประโยชน์ภาษี"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 12: ร้านอาหาร 1.5M - ความเสี่ยงกลาง
    # Section 40(8) - Restaurant business (60% deduction)
    # ===================================================================
    TEST_CASE_12 = {
        "name": "ร้านอาหาร 1.5M - ความเสี่ยงกลาง",
        "description": "ร้านอาหาร Section 40(8) หัก 60%",
        "input": {
            "gross_income": 1500000,
            "income_type": "40(8)",
            "profession_type": None,
            "business_type": "hotel_restaurant",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 90000,
            "parent_support": 60000,
            "disabled_support": 0,
            "life_insurance": 80000,
            "life_insurance_pension": 10000,
            "life_insurance_parents": 30000,
            "health_insurance": 25000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 100000,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "medium"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 300000,
                "total_tax_saving": 0,  # Taxable: 85K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับรายได้ระดับกลาง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ความคุ้มครอง", "ประกัน", "ความเสี่ยงต่ำ", "เงินลงทุนพอเหมาะ"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 500000,
                "total_tax_saving": 0,  # Taxable: 85K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นการลงทุนแบบสมดุลระหว่างประกันและกองทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["สมดุล", "กระจายความเสี่ยง", "RMF", "ThaiESG", "ความเสี่ยงปานกลาง"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 800000,
                "total_tax_saving": 0,  # Taxable: 85K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีสูงสุด ใช้วงเงินลงทุนเต็มที่สำหรับผลประโยชน์ทางภาษีสูงสุด",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อนสูงสุด", "RMF", "ThaiESG", "วงเงินเต็มที่", "ผลประโยชน์ภาษี"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 13: นักแสดง 600K - ความเสี่ยงกลาง
    # Section 40(8) - Entertainment (special 60% first 300K, 40% excess, max 600K)
    # ===================================================================
    TEST_CASE_13 = {
        "name": "นักแสดง 600K - ความเสี่ยงกลาง",
        "description": "นักแสดง Section 40(8) Entertainment (60%/40% special rule)",
        "input": {
            "gross_income": 600000,
            "income_type": "40(8)",
            "profession_type": None,
            "business_type": "entertainment",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 0,
            "child_deduction": 0,
            "parent_support": 0,
            "disabled_support": 0,
            "life_insurance": 20000,
            "life_insurance_pension": 0,
            "life_insurance_parents": 0,
            "health_insurance": 10000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 0,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "medium"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 60000,
                "total_tax_saving": 0,  # Taxable: 0 (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับรายได้ระดับกลาง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ความคุ้มครอง", "ประกัน", "ความเสี่ยงต่ำ", "เงินลงทุนพอเหมาะ"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 100000,
                "total_tax_saving": 0,  # Taxable: 0 (0% bracket) → No tax saving
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นการลงทุนแบบสมดุลระหว่างประกันและกองทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["สมดุล", "กระจายความเสี่ยง", "RMF", "ThaiESG", "ความเสี่ยงปานกลาง"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 150000,
                "total_tax_saving": 0,  # Taxable: 0 (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีสูงสุด ใช้วงเงินลงทุนเต็มที่สำหรับผลประโยชน์ทางภาษีสูงสุด",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อนสูงสุด", "RMF", "ThaiESG", "วงเงินเต็มที่", "ผลประโยชน์ภาษี"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST_CASE_14: ช่างภาพ 720K - ความเสี่ยงต่ำ
    # Section 40(8) - Photography business (60% deduction)
    # ===================================================================
    TEST_CASE_14 = {
        "name": "ช่างภาพ 720K - ความเสี่ยงต่ำ",
        "description": "ช่างภาพ Section 40(8) หัก 60%",
        "input": {
            "gross_income": 720000,
            "income_type": "40(8)",
            "profession_type": None,
            "business_type": "photography",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 30000,
            "parent_support": 60000,
            "disabled_support": 0,
            "life_insurance": 40000,
            "life_insurance_pension": 10000,
            "life_insurance_parents": 0,
            "health_insurance": 15000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 30000,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "low"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 60000,
                "total_tax_saving": 0,  # Taxable: 13K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับผู้ที่ต้องการความปลอดภัย",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ความคุ้มครอง", "ประกัน", "ความเสี่ยงต่ำ", "เงินลงทุนน้อย"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 100000,
                "total_tax_saving": 0,  # Taxable: 13K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นประกันและการออมแบบปลอดภัย",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["สมดุล", "ประกันบำนาญ", "ความปลอดภัย", "การออม"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 150000,
                "total_tax_saving": 0,  # Taxable: 13K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีแบบปลอดภัย เพิ่มความคุ้มครองครบถ้วน",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อนภาษี", "ความคุ้มครอง", "ประกันครบถ้วน", "ความมั่นคง"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 15: ร้านเสริมสวย 840K - ความเสี่ยงกลาง
    # Section 40(8) - Cosmetics/Salon business (60% deduction)
    # ===================================================================
    TEST_CASE_15 = {
        "name": "ร้านเสริมสวย 840K - ความเสี่ยงกลาง",
        "description": "ร้านเสริมสวย Section 40(8) หัก 60%",
        "input": {
            "gross_income": 840000,
            "income_type": "40(8)",
            "profession_type": None,
            "business_type": "cosmetics",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 60000,
            "parent_support": 60000,
            "disabled_support": 0,
            "life_insurance": 50000,
            "life_insurance_pension": 10000,
            "life_insurance_parents": 0,
            "health_insurance": 20000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 50000,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "medium"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 60000,
                "total_tax_saving": 0,  # Taxable: 1K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับรายได้ระดับกลาง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ความคุ้มครอง", "ประกัน", "ความเสี่ยงต่ำ", "เงินลงทุนพอเหมาะ"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 100000,
                "total_tax_saving": 0,  # Taxable: 1K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นการลงทุนแบบสมดุลระหว่างประกันและกองทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["สมดุล", "กระจายความเสี่ยง", "RMF", "ThaiESG", "ความเสี่ยงปานกลาง"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 150000,
                "total_tax_saving": 0,  # Taxable: 1K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีสูงสุด ใช้วงเงินลงทุนเต็มที่สำหรับผลประโยชน์ทางภาษีสูงสุด",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อนสูงสุด", "RMF", "ThaiESG", "วงเงินเต็มที่", "ผลประโยชน์ภาษี"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 16: โรงซ่อมรถ 2.4M - ความเสี่ยงสูง
    # Section 40(8) - Vehicle repair business (60% deduction)
    # ===================================================================
    TEST_CASE_16 = {
        "name": "โรงซ่อมรถ 2.4M - ความเสี่ยงสูง",
        "description": "โรงซ่อมรถยนต์ Section 40(8) หัก 60%",
        "input": {
            "gross_income": 2400000,
            "income_type": "40(8)",
            "profession_type": None,
            "business_type": "general_trade",  # Vehicle repair falls under general business
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 90000,
            "parent_support": 120000,
            "disabled_support": 0,
            "life_insurance": 100000,
            "life_insurance_pension": 10000,
            "life_insurance_parents": 30000,
            "health_insurance": 25000,
            "health_insurance_parents": 30000,
            "social_security": 0,
            "pension_insurance": 150000,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "high"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 500000,
                "total_tax_saving": 100000,  # Taxable: 285K (with AMT) → 500K × 20% = 100,000
                "expected_text": {
                    "description": "เน้นการลงทุน เพิ่มผลตอบแทนแบบรับความเสี่ยง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ผลตอบแทนสูง", "หุ้น", "กองทุนรวม", "รับความเสี่ยง"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 800000,
                "total_tax_saving": 200000,  # Taxable: 285K (with AMT) → 800K × 25% = 200,000
                "expected_text": {
                    "description": "เน้นการลงทุนแบบก้าวร้าว กระจายในกองทุนหุ้นและตราสารทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["ก้าวร้าว", "กองทุนหุ้น", "SSF", "RMF", "ความเสี่ยงสูง"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 1200000,
                "total_tax_saving": 300000,  # Taxable: 285K (with AMT) → 1,200K × 25% = 300,000
                "expected_text": {
                    "description": "เน้นผลตอบแทนและลดหย่อนภาษีสูงสุด ลงทุนในตราสารทุนเต็มที่",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ผลตอบแทนสูงสุด", "ลดหย่อนสูงสุด", "หุ้น", "SSF", "RMF"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 17: ขนส่ง 1.2M - ความเสี่ยงกลาง
    # Section 40(8) - Transportation business (60% deduction)
    # ===================================================================
    TEST_CASE_17 = {
        "name": "ขนส่ง 1.2M - ความเสี่ยงกลาง",
        "description": "ธุรกิจขนส่ง Section 40(8) หัก 60%",
        "input": {
            "gross_income": 1200000,
            "income_type": "40(8)",
            "profession_type": None,
            "business_type": "transportation",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 60000,
            "parent_support": 60000,
            "disabled_support": 0,
            "life_insurance": 60000,
            "life_insurance_pension": 10000,
            "life_insurance_parents": 0,
            "health_insurance": 20000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 80000,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "medium"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 200000,
                "total_tax_saving": 0,  # Taxable: 145K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับรายได้ระดับกลาง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ความคุ้มครอง", "ประกัน", "ความเสี่ยงต่ำ", "เงินลงทุนพอเหมาะ"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 350000,
                "total_tax_saving": 0,  # Taxable: 145K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นการลงทุนแบบสมดุลระหว่างประกันและกองทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["สมดุล", "กระจายความเสี่ยง", "RMF", "ThaiESG", "ความเสี่ยงปานกลาง"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 500000,
                "total_tax_saving": 0,  # Taxable: 145K (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีสูงสุด ใช้วงเงินลงทุนเต็มที่สำหรับผลประโยชน์ทางภาษีสูงสุด",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อนสูงสุด", "RMF", "ThaiESG", "วงเงินเต็มที่", "ผลประโยชน์ภาษี"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 18: โรงซักรีด 600K - ความเสี่ยงต่ำ
    # Section 40(8) - Laundry business (60% deduction)
    # ===================================================================
    TEST_CASE_18 = {
        "name": "โรงซักรีด 600K - ความเสี่ยงต่ำ",
        "description": "โรงซักรีด Section 40(8) หัก 60%",
        "input": {
            "gross_income": 600000,
            "income_type": "40(8)",
            "profession_type": None,
            "business_type": "laundry",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 30000,
            "parent_support": 0,
            "disabled_support": 0,
            "life_insurance": 30000,
            "life_insurance_pension": 0,
            "life_insurance_parents": 0,
            "health_insurance": 10000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 20000,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "low"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 60000,
                "total_tax_saving": 0,  # Taxable: 0 (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับผู้ที่ต้องการความปลอดภัย",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ความคุ้มครอง", "ประกัน", "ความเสี่ยงต่ำ", "เงินลงทุนน้อย"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 100000,
                "total_tax_saving": 0,  # Taxable: 0 (0% bracket) → No tax saving
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นประกันและการออมแบบปลอดภัย",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["สมดุล", "ประกันบำนาญ", "ความปลอดภัย", "การออม"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 150000,
                "total_tax_saving": 0,  # Taxable: 0 (0% bracket) → No tax saving
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีแบบปลอดภัย เพิ่มความคุ้มครองครบถ้วน",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อนภาษี", "ความคุ้มครอง", "ประกันครบถ้วน", "ความมั่นคง"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 19: โรงพิมพ์ 1.8M - ความเสี่ยงสูง
    # Section 40(8) - Printing business (60% deduction)
    # ===================================================================
    TEST_CASE_19 = {
        "name": "โรงพิมพ์ 1.8M - ความเสี่ยงสูง",
        "description": "โรงพิมพ์ Section 40(8) หัก 60%",
        "input": {
            "gross_income": 1800000,
            "income_type": "40(8)",
            "profession_type": None,
            "business_type": "printing",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 60000,
            "parent_support": 120000,
            "disabled_support": 0,
            "life_insurance": 100000,
            "life_insurance_pension": 10000,
            "life_insurance_parents": 0,
            "health_insurance": 25000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 120000,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "high"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 300000,
                "total_tax_saving": 30000,  # Taxable: 165K (10% bracket) → 300K × 10% = 30,000
                "expected_text": {
                    "description": "เน้นการลงทุน เพิ่มผลตอบแทนแบบรับความเสี่ยง",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ผลตอบแทนสูง", "หุ้น", "กองทุนรวม", "รับความเสี่ยง"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 500000,
                "total_tax_saving": 75000,  # Taxable: 165K (15% effective with AMT) → 500K × 15% = 75,000
                "expected_text": {
                    "description": "เน้นการลงทุนแบบก้าวร้าว กระจายในกองทุนหุ้นและตราสารทุน",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["ก้าวร้าว", "กองทุนหุ้น", "SSF", "RMF", "ความเสี่ยงสูง"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 800000,
                "total_tax_saving": 160000,  # Taxable: 165K (20% effective with AMT) → 800K × 20% = 160,000
                "expected_text": {
                    "description": "เน้นผลตอบแทนและลดหย่อนภาษีสูงสุด ลงทุนในตราสารทุนเต็มที่",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ผลตอบแทนสูงสุด", "ลดหย่อนสูงสุด", "หุ้น", "SSF", "RMF"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASE 20: เกษตรกร 480K - ความเสี่ยงต่ำ
    # Section 40(8) - Agriculture business (60% deduction)
    # ===================================================================
    TEST_CASE_20 = {
        "name": "เกษตรกร 480K - ความเสี่ยงต่ำ",
        "description": "เกษตรกร Section 40(8) หัก 60%",
        "input": {
            "gross_income": 480000,
            "income_type": "40(8)",
            "profession_type": None,
            "business_type": "agriculture",
            "expense_method": "standard",
            "actual_expenses": 0,
            "personal_deduction": 60000,
            "spouse_deduction": 60000,
            "child_deduction": 60000,
            "parent_support": 0,
            "disabled_support": 0,
            "life_insurance": 20000,
            "life_insurance_pension": 0,
            "life_insurance_parents": 0,
            "health_insurance": 10000,
            "health_insurance_parents": 0,
            "social_security": 0,
            "pension_insurance": 0,
            "provident_fund": 0,
            "gpf": 0,
            "pvd_teacher": 0,
            "rmf": 0,
            "thai_esg": 0,
            "thai_esgx_new": 0,
            "thai_esgx_ltf": 0,
            "stock_investment": 0,
            "easy_e_receipt": 0,
            "home_loan_interest": 0,
            "nsf": 0,
            "donation_general": 0,
            "donation_education": 0,
            "donation_social_enterprise": 0,
            "donation_political": 0,
            "risk_tolerance": "low"
        },
        "expected_plans": {
            "plan_1": {
                "total_investment": 40000,
                "total_tax_saving": 0,  # 0K + 40K = 40K (0% bracket) → 40K × 0% = 0
                "expected_text": {
                    "description": "เน้นความคุ้มครอง เงินลงทุนพอเหมาะสำหรับผู้ที่ต้องการความปลอดภัย",
                    "plan_name": "ทางเลือกที่ 1 - เน้นประกัน",
                    "keywords": ["ความคุ้มครอง", "ประกัน", "ความเสี่ยงต่ำ", "เงินลงทุนน้อย"],
                    "key_points": [
                        "ประกัน",
                        "คุ้มครอง",
                        "ลดหย่อนภาษี"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "ประกันสุขภาพ",
                            "pros": [
                                "ให้ความคุ้มครองสุขภาพ",
                                "ลดหย่อนภาษีได้สูงสุด 25,000 บาท",
                                "ช่วยลดภาระค่าใช้จ่ายทางการแพทย์"
                            ],
                            "cons": [
                                "ไม่มีผลตอบแทนจากการลงทุน",
                                "ต้องจ่ายเบี้ยประกันต่อเนื่อง",
                                "ไม่เหมาะสำหรับการเติบโตของเงิน"
                            ]
                        },
                        {
                            "category": "ประกันบำนาญ",
                            "pros": ["รับประกันรายได้หลังเกษียณ", "ลดหย่อนภาษีได้สูงสุด 15% หรือ 200,000 บาท", "ผลตอบแทนที่แน่นอน"],
                            "cons": ["ต้องถือครองจนถึงอายุที่กำหนด", "ผลตอบแทนต่ำกว่าการลงทุนในตลาดทุน", "สภาพคล่องต่ำ"]
                        }
                    ]
                }
            },
            "plan_2": {
                "total_investment": 60000,
                "total_tax_saving": 0,  # 0K + 60K = 60K (0% bracket) → 60K × 0% = 0
                "expected_text": {
                    "description": "กระจายความเสี่ยง เน้นประกันและการออมแบบปลอดภัย",
                    "plan_name": "ทางเลือกที่ 2 - สมดุล",
                    "keywords": ["สมดุล", "ประกันบำนาญ", "ความปลอดภัย", "การออม"],
                    "key_points": [
                        "กองทุน",
                        "ประกัน",
                        "ความเสี่ยง"
                    ],
                    "expected_allocations": [
                        {
                            "category": "ประกันชีวิต",
                            "pros": ["ให้ความคุ้มครองชีวิตและครอบครัว", "ลดหย่อนภาษีได้สูงสุด 100,000 บาท", "สร้างความมั่นใจทางการเงิน"],
                            "cons": ["ผลตอบแทนจากการลงทุนต่ำ", "ต้องจ่ายเบี้ยประกันต่อเนื่อง", "ไม่เหมาะสำหรับการเติบโตของเงิน"]
                        },
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        }
                    ]
                }
            },
            "plan_3": {
                "total_investment": 80000,
                "total_tax_saving": 0,  # 0K + 80K = 80K (0% bracket) → 80K × 0% = 0
                "expected_text": {
                    "description": "เน้นลดหย่อนภาษีแบบปลอดภัย เพิ่มความคุ้มครองครบถ้วน",
                    "plan_name": "ทางเลือกที่ 3 - เน้นการเติบโต",
                    "keywords": ["ลดหย่อนภาษี", "ความคุ้มครอง", "ประกันครบถ้วน", "ความมั่นคง"],
                    "key_points": [
                        "ลดหย่อนภาษี",
                        "วงเงิน",
                        "ลงทุน"
                    ],
                    "expected_allocations": [
                        {
                            "category": "RMF",
                            "pros": ["ลดหย่อนภาษีได้สูงถึง 30% ของรายได้", "ผลตอบแทนระยะยาวจากการลงทุนในตลาดทุน", "เหมาะสำหรับการวางแผนเกษียณ"],
                            "cons": ["ต้องถือจนอายุ 55 ปีหรือครบ 5 ปี", "ต้องลงทุนต่อเนื่องทุกปี", "มีความเสี่ยงจากตลาดหุ้น"]
                        },
                        {
                            "category": "ThaiESG",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "ลงทุนในบริษัทที่คำนึงถึงความยั่งยืน", "ผลตอบแทนดีจากกองทุนหุ้นคุณภาพ"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "ทางเลือกกองทุนจำกัด"]
                        },
                        {
                            "category": "ThaiESGX",
                            "pros": ["ลดหย่อนภาษีได้ 30% สูงสุด 300,000 บาท", "รองรับเงินจาก LTF เดิม", "ลงทุนในหุ้นที่มีความยั่งยืน"],
                            "cons": ["ต้องถือครองอย่างน้อย 8 ปี", "มีความเสี่ยงจากตลาดหุ้น", "เป็นกองทุนใหม่ ข้อมูลผลตอบแทนในอดีตจำกัด"]
                        }
                    ]
                }
            }
        }
    }

    # ===================================================================
    # TEST CASES LIST
    # ===================================================================
    @classmethod
    def get_all_test_cases(cls) -> List[Dict[str, Any]]:
        """Return all test cases as a list"""
        return [
            cls.TEST_CASE_1,
            cls.TEST_CASE_2,
            cls.TEST_CASE_3,
            cls.TEST_CASE_4,
            cls.TEST_CASE_5,
            cls.TEST_CASE_6,
            cls.TEST_CASE_7,
            cls.TEST_CASE_8,
            cls.TEST_CASE_9,
            cls.TEST_CASE_10,
            cls.TEST_CASE_11,
            cls.TEST_CASE_12,
            cls.TEST_CASE_13,
            cls.TEST_CASE_14,
            cls.TEST_CASE_15,
            cls.TEST_CASE_16,
            cls.TEST_CASE_17,
            cls.TEST_CASE_18,
            cls.TEST_CASE_19,
            cls.TEST_CASE_20,
        ]
    
    @classmethod
    def get_test_case_by_id(cls, test_id: int) -> Dict[str, Any]:
        """ดึง test case จาก ID (1-based)"""
        all_cases = cls.get_all_test_cases()
        if 1 <= test_id <= len(all_cases):
            return all_cases[test_id - 1]
        return None

    @classmethod
    def get_test_case_by_name(cls, name: str) -> Dict[str, Any]:
        """ดึง test case จากชื่อ"""
        all_cases = cls.get_all_test_cases()
        for case in all_cases:
            if case["name"] == name:
                return case
        return None


# Export for use in evaluation scripts
TEST_CASES = EvaluationTestData.get_all_test_cases()
